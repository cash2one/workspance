<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">


            <title>Moree项目 审核列表应用逻辑 - P01-国际站项目文档库 - 欢迎来到B2B文档中心</title>
    
    
    
    
    
    
    

            
<meta id="confluence-context-path" name="confluence-context-path" content="">
<script type="text/javascript">
    // Deprecated global variables. To be removed in a future version of Confluence.
    var contextPath = '';
    var i18n = [];
</script>



<!-- include system resources -->
<link type="text/css" rel="stylesheet" href="viewpage.action_files/master.css" title="Confluence Master Stylesheet" media="all">
<link type="text/css" rel="stylesheet" href="viewpage.action_files/wiki-content.css" media="all">
<link type="text/css" rel="stylesheet" href="viewpage.action_files/tabs.css" media="all">
<link type="text/css" rel="stylesheet" href="viewpage.action_files/menu.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1322/11/1.0/_/download/resources/confluence.web.resources:master-styles/menu-ie.css" media="all"/>
<![endif]-->
<link type="text/css" rel="stylesheet" href="viewpage.action_files/tables.css" media="all">
<link type="text/css" rel="stylesheet" href="viewpage.action_files/panels.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1322/11/1.0/_/download/resources/confluence.web.resources:master-styles/master-ie.css" title="Master-IE" media="all"/>
<![endif]-->
<link type="text/css" rel="stylesheet" href="viewpage.action_files/renderer-macros.css" media="all">
<link type="text/css" rel="stylesheet" href="viewpage.action_files/information-macros.css" media="all">
<link type="text/css" rel="stylesheet" href="viewpage.action_files/layout-macros.css" media="all">
<script type="text/javascript" src="viewpage.action_files/yahoo-dom-event.js"></script>
<script type="text/javascript" src="viewpage.action_files/atlassian.js"></script>
<script type="text/javascript" src="viewpage.action_files/jquery.js"></script>
<script type="text/javascript" src="viewpage.action_files/jquery-compatibility.js"></script>
<script type="text/javascript" src="viewpage.action_files/animation.js"></script>
<script type="text/javascript" src="viewpage.action_files/comments.js"></script>
<link type="text/css" rel="stylesheet" href="viewpage.action_files/comments.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1322/11/1.0/_/download/resources/confluence.web.resources:comments/comments-ie.css" media="all"/>
<![endif]-->
<script type="text/javascript" src="viewpage.action_files/breadcrumbs.js"></script>
<script type="text/javascript" src="viewpage.action_files/master.js"></script>
<script type="text/javascript" src="viewpage.action_files/menu.js"></script>
<script type="text/javascript" src="viewpage.action_files/PageNotification.js"></script>
<link type="text/css" rel="stylesheet" href="viewpage.action_files/print.css" media="print">
<script type="text/javascript" src="viewpage.action_files/atlassian-effects.js"></script>

<!-- end system resources -->

    <link rel="stylesheet" href="viewpage.action_files/combined.css" type="text/css">

    <meta name="confluence-request-time" content="1256621482924">
<link rel="shortcut icon" href="http://b2b-doc.alibaba-inc.com/images/icons/favicon.ico">
<link rel="icon" type="image/png" href="http://b2b-doc.alibaba-inc.com/images/icons/favicon.png">


    
</head><body onload="placeFocus()" id="com-atlassian-confluence">
    


    <script type="text/javascript">
        function hideMessage(messageId)
        {
            var message = document.getElementById(messageId)
            message.style.display = "none";
            setCookie(messageId, true);
        }
    </script>

        
<div id="header">
        <form id="quick-search" method="post" action="/dosearchsite.action">
                <fieldset>
            <legend>Quick Search</legend>
            <input name="quickSearch" value="true" type="hidden">
                        <input name="searchQuery.spaceKey" value="conf_global" type="hidden">
            <input value="Search" class="placeholded" id="quick-search-query" accesskey="q" name="searchQuery.queryString" size="25" type="text">
            <input id="quick-search-submit" value="Search" type="submit">
        </fieldset>
        <fieldset class="hidden parameters">
            <input id="quickSearchPlaceholder" value="Search" type="hidden">
        </fieldset>
    </form>
   
                    </div>
    </li>
        
                                
            <li class="normal ajs-menu-item">
         
</div>
<div id="main">
    
                <ul id="user-control-panel">
                    

                            <li><a href="http://b2b-doc.alibaba-inc.com/users/viewuserhistory.action" onclick="window.open(this.href,'user_history', 'width=620, height=150, resizable'); return false;" title="View History">History</a></li>
            
            <li><a href="http://b2b-doc.alibaba-inc.com/users/viewuserprofile.action?username=yinhai.fuyh">Preferences</a></li>

            
            <li><a href="http://b2b-doc.alibaba-inc.com/logout.action" id="logout">Log Out</a></li>
                </ul>
        
    <div id="navigation" class="content-navigation view">
        <fieldset class="hidden parameters">
            <input id="pageId" value="38848281" type="hidden">
        </fieldset>
        <ul class="ajs-menu-bar">
                                <li class="ajs-button normal">
    
    <a id="editPageLink" href="http://b2b-doc.alibaba-inc.com/pages/editpage.action?pageId=38848281" class="edit" accesskey="e">
                   <span><u>E</u>dit</span>            </a>
</li>
                    
            <li class="normal ajs-menu-item">
        <a id="add-menu-link" class="add trigger ajs-menu-title" href="#"><span><span>Add</span></span></a>         <div class="ajs-drop-down hidden">
                        <ul id="add-menu-link-space" class="section-space first">
                                        <li>
    
    <a id="createPageLink" href="http://b2b-doc.alibaba-inc.com/pages/createpage.action?spaceKey=icbuproj&amp;fromPageId=38848281" class="add-page">
                   <span>Page</span>            </a>
</li>
                            </ul>
                        <ul id="add-menu-link-page" class="section-page">
                                        <li>
    
    <a id="add-comment-menu-link" href="http://b2b-doc.alibaba-inc.com/pages/viewpage.action?pageId=38848281&amp;showComments=true&amp;showCommentArea=true#addcomment" class="add-comment">
                   <span>Comment</span>            </a>
</li>
                                        <li>
    
    <a id="add-attachment-link" href="http://b2b-doc.alibaba-inc.com/pages/viewpageattachments.action?pageId=38848281" class="add-attachment" accesskey="a">
                   <span>Attachment</span>            </a>
</li>
                            </ul>
                    </div>
    </li>
                    
            <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action trigger ajs-menu-title" href="#"><span><span>Tools</span></span></a>         <div style="margin-left: -48px;" class="ajs-drop-down hidden">
                        <ul id="action-menu-link-primary" class="section-primary first">
                                        <li>
    
    <a id="view-attachments-link" href="http://b2b-doc.alibaba-inc.com/pages/viewpageattachments.action?pageId=38848281" class="action-view-attachments" accesskey="a">
                   <span><u>A</u>ttachments (2)</span>            </a>
</li>
                                        <li>
    
    <a id="action-view-history-link" href="http://b2b-doc.alibaba-inc.com/pages/viewpreviousversions.action?pageId=38848281" class="action-view-history">
                   <span>History</span>            </a>
</li>
                            </ul>
                        <ul id="action-menu-link-marker" class="section-marker">
                                        <li>
    
    <a id="page-favourite" href="http://b2b-doc.alibaba-inc.com/labels/addfavourite.action?entityId=38848281" class="action-page-favourite">
                   <span>Favourite</span>            </a>
</li>
                                        <li>
    
    <a id="page-watch" href="http://b2b-doc.alibaba-inc.com/pages/addpagenotification.action?pageId=38848281" class="action-page-watching">
                   <span>Watch</span>            </a>
</li>
                            </ul>
                        <ul id="action-menu-link-secondary" class="section-secondary">
                                        <li>
    
    <a id="view-page-info-link" href="http://b2b-doc.alibaba-inc.com/pages/viewinfo.action?pageId=38848281" class="action-view-info" accesskey="i">
                   <span><u>I</u>nfo</span>            </a>
</li>
                                        <li>
    
    <a id="action-view-source-link" href="http://b2b-doc.alibaba-inc.com/pages/viewpagesrc.action?pageId=38848281" class="action-view-source popup-link">
                   <span>View Wiki Markup</span>            </a>
</li>
                            </ul>
                        <ul id="action-menu-link-modify" class="section-modify">
                                        <li>
    
    <a id="action-copy-page-link" href="http://b2b-doc.alibaba-inc.com/pages/copypage.action?idOfPageToCopy=38848281&amp;spaceKey=icbuproj" class="action-copy">
                   <span>Copy</span>            </a>
</li>
                                        <li>
    
    <a id="action-move-page-link" href="http://b2b-doc.alibaba-inc.com/pages/editpage.action?pageId=38848281&amp;locationShowing=true#locationSection" class="action-move">
                   <span>Move</span>            </a>
</li>
                            </ul>
                    </div>
    </li>
            </ul>
    </div>

    <h1 id="title-heading" class="pagetitle">
                                    <span id="title-text">            <a href="http://b2b-doc.alibaba-inc.com/pages/viewpage.action?pageId=38848281">Moree项目 审核列表应用逻辑</a>
    </span>
    </h1>

    <!--
    Root decorator: all decisions about how a page is to be decorated via the
                    inline decoration begins here.
-->



<!--
    Switch based upon the context. However, for now, just delegate to a decorator
    identified directly by the context.
-->


    
    

    
    
        
    
    
    


<div id="content" class="page view">
    
        
    
                
    
        <div class="wiki-content">
           <!-- wiki content -->
            <h5><a name="Moree项目审核列表应用逻辑-界面原型icbuproj:Moree项目UED提供的资源"></a><a href="http://b2b-doc.alibaba-inc.com/pages/viewpage.action?pageId=38844576" title="Moree项目_UED提供的资源">界面原型</a></h5>


<h5><a name="Moree项目审核列表应用逻辑-界面逻辑"></a>界面逻辑</h5>

<p><img src="viewpage.action_files/a.png" width="800" align="absmiddle" border="0" height="530"></p>

<h5><a name="Moree项目审核列表应用逻辑-设计说明"></a>设计说明</h5>

<ol>
	<li>UI页面：
	<ol>
		<li>领取任务页面：receiveTask(view)</li>
		<li>任务列表页面：taskList(view)</li>
		<li>xxxx任务页面：xxxTask(view) 例如productTask,companyTask</li>
	</ol>
	</li>
	<li>控制器类
	<ol>
		<li>ReceiveTaskController：负责为任务领取页面准备数据</li>
		<li>TaskListController：负责为任务列表页面准备数据，处理任务列表页面提交的请求（更改状态、更改状态&amp;领取任务）</li>
	</ol>
	</li>
	<li>UI组件
	<ol>
		<li>产品类目(CategoryWidget)</li>
		<li>图片显示(ImageWidget): 要求支持缩略图的功能</li>
		<li>邮件模板(EmailTemplateWidget)</li>
		<li>关键词推荐(KeyWordsWidget)</li>
	</ol>
	</li>
	<li>DTO处理器
	<ol>
		<li>TaskDtoPrepare:负责根据传入的任务类型，和任务ID列表，找到相应的DtoPrepare(例如ProductDtoPrepare)</li>
		<li>ProductTaskDtoPrepare:负责从相应产品数据中为产品审核界面准备数据（例如关键字数据，公司信息数据等)</li>
		<li>CompanyTaskDtoPrepare:负责从相应公司数据中为公司审核界面准备数据（例如关键字数据，公司信息数据等)</li>
		<li>XxxxxxTaskDtoPrepare:其它任务审核Dto准备器</li>
	</ol>
	</li>
</ol>


<h5><a name="Moree项目审核列表应用逻辑-实现原则&amp;建议"></a>实现原则&amp;建议</h5>

<ol>
	<li>局部加载（AJAX）使用原则：当数据量比较大（例如关键字推荐），且不是每次都需要使用时采用AJAX来加载</li>
	<li>Velocity模板文件里原则上不允许编写业务逻辑，在某些情况下（例如：为了显示）如果界面逻辑超过3行，原则上采用PullTool的方式来实现</li>
	<li>类
目显示的处理原则：由于类目的数据量比较大（3000-5000条），处理原则是类目列表数据在客户端的浏览器里只存一份实例，获得焦点的类目选择框将重
用这个实例来进行类目选择，一旦选择完毕，失去焦点后，只对刚选择过的选择框存取选中的值，这样做的好处是，当审核列表面上有较多（例如100）个被审核
对像（例如产品）时，类目的总数据量只有一份</li>
</ol>


<h5><a name="Moree项目审核列表应用逻辑-与其它模块/组件的接口"></a>与其它模块/组件的接口</h5>

<ol>
	<li>与任务流的接口，要求任务流可以根据传入的任务类型返回指定数目的任务的ID列表</li>
	<li>与任务领取的接口：要求任务领取传入任务类型和其它查询条件</li>
</ol>
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
    rdf:about="http://b2b-doc.alibaba-inc.com/pages/viewpage.action?pageId=38848281"
    dc:identifier="http://b2b-doc.alibaba-inc.com/pages/viewpage.action?pageId=38848281"
    dc:title="Moree项目 审核列表应用逻辑"
    trackback:ping="http://b2b-doc.alibaba-inc.com/rpc/trackback/38848281"/>
</rdf:RDF>
-->

        <div id="labels-section" class="pageSection">
            
 
<div id="labels-section">
    <div id="labels-header" class="section-header">
        <h2 class="section-title">Labels</h2>&nbsp;
                <span id="labels-edit-link" class="inline-control-link">
            <a href="" onclick="onAddLabel(); showLabelsInput(); return false;">Edit Labels</a>
        </span>
            </div>
    <div id="labelsList">
                    (None)
            </div>

    <!-- Delay the loading of the external javascript file needed for labels (as it takes too long to load and visibly holds loading of the page body) -->
    <!-- To do this without javascript errors over undefined functions, we need to declare stubs here (that are overrided later by the proper implementations) -->
    <script type="text/javascript">
        function doAddLabel(hideTextfieldAfterAddParam)
        {
            // stub
        }

        function onAddLabel()
        {
            // stub
        }

        function showLabelsInput()
        {
            // stub
        }
    </script>

    <!-- This is a hack to work around an apparent SiteMesh bug - http://jira.opensymphony.com/browse/SIM-198 -->
    

    <span class="error"><span class="errorMessage" id="errorSpan"></span></span>
    <form name="addLabelForm" method="" action="" onsubmit="doAddLabel(false); return false;" style="margin: 0px; padding: 0px;">
        <div id="labelInputSpan" style="display: none;">
            <div style="border: 1px solid rgb(204, 204, 204); padding: 8px; background-color: rgb(240, 240, 240);">

            <div id="labelOperationErrorContainer" style="display: none;"><span class="error"><span class="errorMessage" id="labelOperationErrorMessage"></span></span></div>

            <table width="90%">
                <tbody><tr>
                    <td>
                        <div class="formtitle" style="padding-bottom: 3px; font-size: 13px;">Add Labels</div>
                    </td>
                    <td align="right"><div id="waitImageAndStatus" style="display: none; height: 16px;"><img alt="Wait Image" src="viewpage.action_files/wait.gif" align="absmiddle" border="0">&nbsp;<span id="labelOperationStatus" class="smalltext" style="vertical-align: middle;"></span></div></td>
                </tr>
                <tr><td width="50%">
                        Enter labels to add to this page:<br>
            <input autocomplete="off" id="labelName" name="labelsString" class="monospaceInput" size="40" type="text">
            <input onclick="doAddLabel(false); return false;" value="Add" type="submit"><input onclick="doAddLabel(true); return false;" value="Done" type="button">
            <div style="display: none;" class="auto_complete" id="labelsAutocompleteList"></div>
            <div class="smalltext">
                Looking for a label? Just start typing.
            </div>
            </td>
                <td width="50%" valign="top">
                    <div id="suggestedLabelsSpan"></div>
                </td>
            </tr></tbody></table>
            </div>
        </div>
    </form>
</div>
        </div>

            
        

<!--
    Root decorator: all decisions about how a page is to be decorated via the
                    inline decoration begins here.
-->



<!--
    Switch based upon the context. However, for now, just delegate to a decorator
    identified directly by the context.
-->


    
    





<fieldset class="parameters hidden">
    <input id="deleteCommentConfirmMessage" value="Are you sure you want to remove the comment?" type="hidden">
    <input id="collapseTooltip" value="Click to toggle the display of this comment." type="hidden">
</fieldset>





<div id="comments-section" class="pageSection">
    
    
    
    
                                    <p class="noprint">
                <a href="http://b2b-doc.alibaba-inc.com/pages/viewpage.action?pageId=38848281&amp;showComments=true&amp;showCommentArea=true#addcomment" id="add-comment-bottom" accesskey="m">Add Comment</a>
            </p>
                        </div>



            
</div>
</div>


<div id="footer">
                    <ul id="poweredby">
        <li>Powered by <a href="http://www.atlassian.com/software/confluence" class="smalltext">Atlassian Confluence</a> 2.8.1, the <a href="http://www.atlassian.com/software/confluence" class="smalltext">Enterprise Wiki</a>.</li>
        <li class="noprint"><a href="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="smalltext">Bug/feature request</a> –</li>
        <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="smalltext">Atlassian news</a> –</li>
        <li class="noprint"><a href="http://b2b-doc.alibaba-inc.com/administrators.action">Contact administrators</a></li>
    </ul>

    <!-- delay the loading of large javascript files to the end so that they don't interfere with the loading of page content -->
    <span class="hidden scripts">
        <script type="text/javascript">var domainName = 'http://b2b-doc.alibaba-inc.com'; var entityId = '38848281'; var spaceKey = 'icbuproj'</script>
        <script type="text/javascript" src="viewpage.action_files/labels-javascript"></script>
        <script>new Ajax.Autocompleter('labelName', 'labelsAutocompleteList', '38848281', { tokens: new Array(',', ' '), dwrFunction: GenerateAutocompleteLabelsListForEntity.autocompleteLabels});</script>
    </span>
</div>


</body></html>