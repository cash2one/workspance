<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="photoAlbum">

    <!-- 
    <typeAlias alias="photoAlbum" type="com.zz91.ep.domain.trade.PhotoAlbum"/>
    
    <sql id="simpleColumn">
        pa.id,
        pa.name,
        pa.details,
        pa.album_type
    </sql>
    
    <resultMap class="photoAlbum" id="simpleColumnMap">
        <result property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="details" column="details"/>
        <result property="albumType" column="album_type"/>
    </resultMap>
    
   	<select id="queryPhotoAlbumByUser" parameterClass="java.util.HashMap" resultMap="simpleColumnMap">
        select
            <include refid="simpleColumn"/>
            ,(select path_thumb from photo p where pa.id= p.photo_album_id limit 1) as photoCover
        from
            photo_album pa 
        where 
            pa.cid = #cid#
            <isNotEmpty property="uid">
                and pa.uid = #uid#
            </isNotEmpty>
        order by pa.gmt_created asc
        limit 100
    </select>
     -->
</sqlMap>