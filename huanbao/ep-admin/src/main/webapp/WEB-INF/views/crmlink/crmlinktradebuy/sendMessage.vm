<script type="text/javascript" src="#springUrl('/app/crmlink/tradebuy/message.js')" ></script>
<script type="text/javascript" >
	Ext.onReady(function(){
	
		var form=new com.zz91.ep.linkMessage.Form({
			id:MESS.MESSAGE_FORM,
			region:"center"
		});
		
		var grid= new com.zz91.ep.linkMessage.Grid({
			id:MESS.MESSAGE_GRID,
			split:true,
			region:"west",
			width:800,
			listeners:{
			"rowclick":function(g,rowindex,e){
					form.loadOneRecord(grid.getStore().getAt(rowindex).get("id"));
				}
			}
		});
		
		#if($!{id} && $!{id}>0)
			grid.getStore().baseParams["cid"]=$!{id};
		#end

		var viewport = new Ext.Viewport({
			layout:"border",
			items:[grid,form]
		});
		
	});
</script>