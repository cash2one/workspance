<!DOCTYPE html>
<html>
<head>
<title>media模块</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="copyright" content="www.broadzou.com" />
<link rel="stylesheet" href="../css/base.css">
<link rel="stylesheet" href="../css/common.css">
<script src="../script/api.js"></script>
<style>
#header {
    background-color:#81a9c3;
}
#nav{
    display:-webkit-box;
    height:44px;
}
#left {
    width:80px;
    color:#fff;
    background:url(../image/navbtn_back.png) no-repeat 14px 12px;
    -webkit-background-size:12px 20px;
}
#left>span {
    margin-top:13px;
    margin-left:36px;
    font-size:18px;
    height:18px;
    line-height:18px;
}
#middle {
    -webkit-box-flex:1;
    width:100%;
    display:-webkit-box;
    -webkit-box-pack:center;
  	-webkit-box-align:center;
}
#title {
    font-size:18px;
	text-align:center;
	color:#fff;
}
#right {
    width:80px;
}
section {
    -webkit-box-flex:1;
}
.leftBtnActive {
    background:url(../image/navbtn_back_hov.png) no-repeat 14px 12px!important;
    -webkit-background-size:12px 20px!important;
    color:rgb(94,153,186)!important;
}
.rightBtnActive {
}
</style>
</head>
<body>
    <div id="wrap">
	    <header id='header'>
	        <nav id="nav">
	            <a id="left" tapmode="leftBtnActive" onclick="api.closeWin();">
	                <span>返回</span>
	            </a>
	            <div id="middle">
	                <strong id="title">影音模块</strong>
	            </div>
	            <a id="right">
	            </a>
	        </nav>
	    </header>
	    <div id="main">
	    </div>
    </div>
</body>
<script>
apiready = function() {
    var header = $api.byId('header');
    $api.fixIos7Bar(header);
    var listview = api.require('listView');
    
    var headerPos = $api.offset(header);
    var main = $api.byId('main');
    var mainPos = $api.offset(main);
    
    var urls = [
                './netAudio.html',
        './speechRecognizer.html',
        './audio.html',
	'./imageBrowser.html',
	'./scanner.html',
    './getPicture.html',
		'./about.html'
    ];
    var names = [
                 'netAudio',
        'speechRecognizer',
        'medias',
	'imageBrowser',
	'scanner',
    'getPicture',
		'more'
    ];
    listview.open({
        x: 0,
        y: headerPos.h,
        w: headerPos.w,
        h: mainPos.h,
        rightBtn:[{
            color:'#E76B65',
            title:'关闭',
            selecteColor:'bc534d'
        },{
            color:'#52C09A',
            title:'查看',
            selecteColor:'429b7c'
        }],
        borderColor:'#CCCCCC',
        cellBgColor:'#FFFFFF',
        cellSelectColor:'#E9E9E9',
        cellHeight:60,
        leftBg:'#e9e9e9',
        rightBg:'#e9e9e9',
      data:[{
            placeHoldImg:'widget://image/media_inner_icon.png',
            title:'netAudio',
            subTitle:'网络音频播放功能',
            titleColor:'#666666',
            titleSize:'14px',
            subTitleColor: '#999999',
            subTitleSize: '12px'
        },{
            placeHoldImg:'widget://image/speechRecognizer.png',
            title:'speechRecognizer',
            subTitle:'语音识别功能',
            titleColor:'#666666',
            titleSize:'14px',
            subTitleColor: '#999999',
            subTitleSize: '12px'
        },{
            placeHoldImg:'widget://image/medias.png',
            title:'medias',
            subTitle:'音频录制及播放及本地视频和网络视频的播放',
            titleColor:'#666666',
            titleSize:'14px',
            subTitleColor: '#999999',
            subTitleSize: '12px'
        },{
        	placeHoldImg:'widget://image/imageBrowser.png',
	        title:'imageBrowser',
            subTitle: '相册功能',
	        titleColor:'#666666',
	        titleSize:'14px',
            subTitleColor: '#999999',
            subTitleSize: '12px'
        },{
        	placeHoldImg:'widget://image/scanner.png',
	        title:'scanner',
            subTitle: '二维码扫描器',
	        titleColor:'#666666',
	        titleSize:'14px',
            subTitleColor: '#999999',
            subTitleSize: '12px'
        },{
            placeHoldImg:'widget://image/getPicture.png',
            title:'getPicture',
            subTitle: '获取媒体文件，支持相册、摄像头等多种方式',
            titleColor:'#666666',
            titleSize:'14px',
            subTitleColor: '#999999',
            subTitleSize: '12px'
        },
        {
        	placeHoldImg:'widget://image/dot.png',
	        title:'more',
            subTitle: '点击体验更多模块',
	        titleColor:'#666666',
	        titleSize:'14px',
            subTitleColor: '#999999',
            subTitleSize: '12px'
        }]
    },function(ret,err){
        var n = ret.index;
        var m = ret.btnIndex;
        if(m == 0){
            return;
        }
        var name = names[n];
        var url = urls[n];
        openHTML(name,url);
        
    });
}
function openHTML(name,url){  
	if("more" === name && "ios" === api.systemType){
		api.confirm({
			"title": "体验 微信 分享功能",
			"msg": "分享APICloud端API传奇到朋友圈...",
			"buttons": ["残忍拒绝", "立即分享"]
		}, function(ret, err){
	
			if(2 == ret.buttonIndex){
				follow();
			}
		})
		
		return;
	}
	         
    if(name && url){
        api.openWin({
            name: name,
            url: url,
			opaque:true,
			bgColor:'#FFF'
        });
    }
};

function follow()
{
    var weiXin = api.require('weiXin');
    weiXin.registerApp({
        appId: 'wxd0d84bbf23b4a0e4'
    }, function(ret, err) {
        if (!ret.status) {// 应用注册失败
			api.alert({
				"title": "分享失败",
				"msg": "您可手动关注我们的公众账号:APICloud",
				"buttons": ["确定"]
			}, function(ret, err){
		
			});
			
			return;
        } 
		/*发布微信分享*/
	    weiXin.sendRequest({
	        scene: "timeline",
	        contentType: "web_page",
	        title: "开发者有福啦！APICloud免费发码，不看后悔一辈子，猛戳这里",
	        description: "开发者有福啦！APICloud免费发码，不看后悔一辈子，猛戳这里",
	        thumbUrl: "http://mmbiz.qpic.cn/mmbiz/lp6euAmKsAEQOT9GfPExicYKaYFZvzAAz8ohYkJibicfQRu1vzVXicUGkztIhLbFoKpI9dYKGh1icjSmlxaqTvmFwYA/0",
	        contentUrl: "http://mp.weixin.qq.com/s?__biz=MzA3MTk3MTQyMQ==&mid=200501731&idx=1&sn=43671cf1c25d9c8ab6983fa24066afdd&from=timeline&isappinstalled=1#rd"

	    }, function(ret, err) {
	        if ( ! ret.status) {
	            api.alert({
	                title: '分享失败',
	                msg: '您可手动关注我们的公众账号:APICloud',
	                buttons: ['确定']
	            });
	        } else {
	            api.alert({
	                title: '分享成功',
	                msg: '感谢您对我们的支持!',
	                buttons: ['确定']
	            });
	        };
	    });
    });
	
}

</script>
</html>