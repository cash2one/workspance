<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<title>两性知识</title>
		<link rel="stylesheet" type="text/css" href="css/api.css"/>
		<link rel="stylesheet" type="text/css" href="css/common.css"/>
		<link rel="stylesheet" href="css/mui.min.css" type="text/css">
		<style>
			/*
			 iscroll
			 */
	        .nav_active{
	        	border-bottom: solid 2px #CF2D28;
	        }
	        .nav_active a {
	            color: #DC282E;
	        }
			#wrapper {
				position: relative;
				z-index: 1;
				height: 37px;
				width: 90%;
				overflow: hidden;
			}
			#scroller {
				position: absolute;
				z-index: 1;
				-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
				height:35px;
				width:700%;
				/*-webkit-transform: translateZ(0);
				 transform: translateZ(0);*/
				-webkit-touch-callout: none;
				-webkit-user-select: none;
				-webkit-text-size-adjust: none;
			}
			#scroller ul {
				list-style: none;
				padding: 0;
				margin: 0;
				display: -webkit-box
			}
			#scroller li {
				width:80px;
				line-height: 35px;
				font-size: 14px;
				overflow: hidden;
				text-align: center;
				padding-left:5px;
				padding-right:5px; 
			}
			/*
			 iscroll
			 */
			
			#navlist {
				width: 100%;
				display: -webkit-box;
				background-color: #F6F6F6;
			}
			.arrow_down {
				display: block;
				background-size: 15px;
				background-repeat: no-repeat;
				background-position: center;
				padding: 15px;
				background-image: url('image/channel_nav_arrow@2x.png');
				-webkit-box-flex: 1;
				-webkit-transform: rotate(180deg);
				-webkit-transition: All .5s ease;
			}
			.arrow_up {
				-webkit-transform: rotate(0deg);
				-webkit-transition: All .5s ease;
			}
			.switchNav {
				position: relative;
				width: 90%;
				line-height: 35px;
				text-indent: 10px;
			}
			
			.cover {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				z-index: 999;
			}
		</style>
	</head>
	<body>
		<header>
			<div class=" header index-header">
				<div class="title">
					<div style="padding-left: 20px;color: #fff;">两性知识</div>
				</div>
			</div>
		</header>
		<div id="navlist">
			<div id="wrapper">
				<div id="scroller">
					<ul><li></li></ul>
				</div>
			</div>
			<div class="switchNav hidden">
				切换栏目
			</div>
			<div class="mui-icon mui-active mui-icon-plus" style="margin-top:5px;" onclick="openOrder()" tapmode=""></div>
		</div>
		<div class="cover hidden" tapmode=""></div>
		
		<footer id="footer" class="mui-bar mui-bar-tab">
			<a tapmode="mui-active" id="defaultTab" class="mui-tab-item" href="javascript:openFirst()">
				<span class="mui-icon mui-icon-list"></span>
				<span class="mui-tab-label">推荐</span>
			</a>
			<a tapmode="mui-active" class="mui-tab-item" href="javascript:openOrder()">
				<span class="mui-icon mui-icon-flag"></span>
				<span class="mui-tab-label">订阅</span>
			</a>
			<a tapmode="mui-active" class="mui-tab-item" href="javascript:openUser()">
				<span class="mui-icon mui-icon-person"></span>
				<span class="mui-tab-label">我的</span>
			</a>
		</footer>
		<script type="text/javascript" src="script/api.js"></script>
		<script type="text/javascript" src="script/zepto.min.js"></script>
		<script type="text/javascript" src="script/iscroll.js"></script>
		<script type="text/javascript" src="script/DBapi.js"></script>
		<script type="text/javascript" src="script/common.js"></script>
		<script>
			var myScroll;
			var navwidth=0,navliwidth=0;
			var typelist=[];
			//顶部滑动栏目
			function loaded() {
				try {
					myScroll = new IScroll('#wrapper', {
						eventPassthrough : true,
						scrollX : true,
						scrollY : false,
						preventDefault : false
					});
				} catch (e) {
					//alert(e)
				}
			}

			apiready = function() {
				try {
					getNavlist();
					fixIos7Bar($(".header"));
				} catch (e) {
				}
			}
			//打开推荐页
			function openFirst(){
				var m=0,tid=0;
				openFrame(tid,m);
			}
			//加载栏目内容
			function openFrame(tid,m) {
				try {
					api.setFrameGroupIndex({
		                name: 'sexgroup',
		                index: m,
		                scroll: true
		            });
					//api.execScript({
						//frameName : 'frame_'+m.toString(),
						//script : 'changesexmain(' + tid.toString() + ')'
					//});
					if (m>=3){
						//myScroll.scrollTo(-navliwidth * (m - 4), 0, 1000);
					}else{
						myScroll.scrollTo(0,0,1000)
					}
					$("#scroller").find('li').removeClass('nav_active');
					$("#scroller").find('li').removeClass('nav_active').eq(m).addClass('nav_active');
				} catch (e) {
					alert(e)
				}
			}
			

			function openfooter(frames) {
				var $header = $api.dom('header');
		        //$api.fixIos7Bar($header);
				var $body = $api.dom('body');
				var $footer = $api.byId('footer');
				var header_h = $("header").height() + $("#navlist").height();
				var body_h = $api.offset($body).h;
				var footer_h = $api.offset($footer).h;
				var rect_h = body_h - header_h - footer_h;
				api.openFrameGroup({
					name : 'sexgroup',
					scrollEnabled : true,
					rect : {
						x : 0,
						y : header_h,
						w : 'auto',
						h : rect_h
					},
					index : 0,
					frames : frames
				}, function(ret, err) {
					if (ret.index >= 3) {
		                //yScroll.scrollTo(-$("li").width() * (ret.index - 4), 0, 1000);
		                myScroll.scrollTo(-navliwidth * (ret.index - 2), 0, 1000);
		            }
		            //openFrame(typelist[ret.index],ret.index,'')
		            $("#scroller").find('li').removeClass('nav_active').eq(ret.index).addClass('nav_active');
				});
			}

			function openUser() {
				var pageParam = {};
	        	openWin("user","./html/win_user.html",pageParam);
			}
			
			function openOrder() {
				var pageParam = {};
	        	openWin("order","./html/my_order.html",pageParam);
			}

		</script>
	</body>
</html>