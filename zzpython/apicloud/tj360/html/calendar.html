<!DOCTYPE html>
<html>
<head>
<title>培训日历</title>
<meta charset="utf-8">
<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
<meta name="copyright" content="www.thundersoft.com" />
<link rel="stylesheet" href="../css/base.css">
<link rel="stylesheet" href="../css/common.css">
<script src="../script/api.js"></script>
<script src="../script/common.js"></script>
<style>
	body{
		background-color: #FAFAFA;
	}
	#left {
		width:50px;
		background:url(../image/back.png) no-repeat center;
		-webkit-background-size:13px 21px;
	}
	#right {
		width:50px;
	}
</style>
</head>
<body>
	<div id="main">
		<header id='header'>
			<nav id="nav">
				<a id="left" tapmode="leftBtnActive" onclick="api.closeWin();">
				</a>
				<div id="middle">
					<strong id="title">培训日历</strong>
				</div>
				<a id="right">
				</a>
			</nav>
		</header>
		<section id='content'></section>
	</div>
</body>
<script>
	apiready = function() {		
		var header = $api.byId('header');
		$api.fixIos7Bar(header);
		api.ajax({
	    	url: serverUrl + '/user/CourseCalendar?fid=' + $api.getStorage('usr').fid,
		    method:'get',
		    cache:false,
		    timeout:15,
		    dataType:'json'
	    }, function(ret,err){
	    	var specialDate = [];
	    	if(ret && ret.status){
		    	var list = ret.body.list;
				for(var i=0; i<list.length; i++){
					specialDate[i] = list[i].ccdate;
				}
	    	}
			var headerPos = $api.offset(header);
			api.openFrame({
				name: 'calendar_frame',
				url: 'calendar_frame.html',
				bounces: false,
				pageParam: {y: headerPos.h, specialDate: specialDate, detailList: ret.body.list},
				rect: {
					x: 0,
					y: headerPos.h,
					w: 'auto',
					h: 'auto'
				}
			});
	    });
	};
</script>
</html>