<!doctype html>
<html lang="chs">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' type='text/css' href='../css/bootstrap.min.css' />
    <script type="text/javascript">

        var uzgetuisdk = null;
        apiready = function(){
            uzgetuisdk = api.require('pushGeTui');
        }

        function initialize() {
            // 初始化sdk并监听透传消息
            uzgetuisdk.initialize(function(ret) {
                // 获取到cid后的回调通知
                api.alert({
                    title: "获取都cid后的回调通知",
                    msg: "cid:" + ret.cid
                });
            });

            uzgetuisdk.register(function(ret) {
                var msg =  "taskid:" + ret.taskid + "\n messageid:" + ret.messageid + "\n payload:" + ret.payload;
            });
        }

        function stopService() {
            uzgetuisdk.stopService(function(ret) {
                // TODO:
            });
        }

        function getVersion() {
            uzgetuisdk.getVersion(function(ret) {
                api.alert({title: "版本",msg: "version:" + ret.version});
            });
        }

        function setTag() {
            var param = {tags:"tag1,tag2"};
            uzgetuisdk.setTag(param,function(ret) {
                api.alert({title: "绑定标签",msg: "settag: "+ret.result});
            });
        }

        function bindAlias() {
            var param = {alias:"myalias"};
            uzgetuisdk.bindAlias(param,function(ret) {
                api.alert({title: "绑定别名",msg: "bindAlias: "+ret.result});
            });
        }

        function setSilentTime() {
            var param = {beginHour:9,duration:12};
            uzgetuisdk.setSilentTime(param,function(ret) {
                // TODO
            });
        }

        function isPushTurnedOn() {
            uzgetuisdk.isPushTurnedOn(function(ret) {
                api.alert({title: "开关状态",msg: "bindAlias: "+ret.result});
            });
        }



    </script>
</head>
<body>
<div class="container-fluid">
    <div class="page-header"><h2>个推推送开放平台</h2><small>请到网站控制台云编译体验</small></div>
    <div class="row">
        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12 btn-group btn-group-justified diy-btn-group-test">
                    <div class="btn-group">
                        <button  tapmode="" type="button" onclick="initialize()" class="btn btn-primary">
                            初始化
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12 btn-group btn-group-justified diy-btn-group-test">
                    <div class="btn-group">
                        <button  tapmode="" type="button" onclick="stopService()" class="btn btn-primary">
                            停止服务
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12 btn-group btn-group-justified diy-btn-group-test">
                    <div class="btn-group">
                        <button tapmode="" type="button" onclick="getVersion()" class="btn btn-primary">
                            获取版本号
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12 btn-group btn-group-justified diy-btn-group-test">
                    <div class="btn-group">
                        <button tapmode="" type="button" onclick="setTag()" class="btn btn-primary">
                            设置标签
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12 btn-group btn-group-justified diy-btn-group-test">
                    <div class="btn-group">
                        <button tapmode="" type="button" onclick="setTag()" class="btn btn-primary">
                            设置标签
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12 btn-group btn-group-justified diy-btn-group-test">
                    <div class="btn-group">
                        <button tapmode="" type="button" onclick="bindAlias()" class="btn btn-primary">
                            绑定别名
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12 btn-group btn-group-justified diy-btn-group-test">
                    <div class="btn-group">
                        <button tapmode="" type="button" onclick="isPushTurnedOn()" class="btn btn-primary">
                            推送开关状态
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>