<!DOCTYPE html>
<html lang='zh-CN'>
    <head>
        <meta charset='utf-8'>
        <meta name='viewport' content='maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width,initial-scale=1.0'/>
        <link rel='stylesheet' type='text/css' href='../css/bootstrap.min.css' />
        <link rel='stylesheet' href='../css/github.css'>
		<style type='text/css'>
		  .diy-btn-group-test {margin : 10px 0px 0px 0px;}
          body{-webkit-user-select:none;}
		</style>
    </head>
    <body>
<div class="panel panel-info">
  <div class="panel-heading">
    <h3 class="panel-title">imageFilter 图片滤镜</h3>
  </div>
  <div class="panel-body">
		<pre class="pre-scrollable">
var module = api.require("imageFilter");

module.open({
    imgPath: "widget://image/imageFilter/test.png"
}, function(ret, err){
    if(! ret.status){
        api.alert({
            msg: JSON.stringify(err)
        });

        return;
    }

    window.imgId = ret.id;

    module.filter({
        id: window.imgId,
        type: "black_white",
        value: "80"
    }, function(ret, err){
        if(! ret.status){
            api.alert({
                msg: JSON.stringify(err)
            });

            return;
        }

        var imgName = Math.floor(Math.random() * (100000)) + ".png";

        module.save({
            id: window.imgId,
            imgPath: "fs://imageFilter",
            imgName:imgName
        }, function(ret, err){
            if(! ret.status){
                api.alert({
                    msg: JSON.stringify(err)
                });

                return;
            }

            var imgDom = document.createElement("img");
            imgDom.src = api.fsDir + "/imageFilter/" +imgName;
            imgDom.width = api.frameWidth;
            imgDom.height = api.frameHeight;
            document.getElementsByTagName("body")[0].replaceChild(imgDom, document.getElementsByTagName("body")[0].firstElementChild);
        });
    });
});
	</pre>
</div>
<div class="panel-footer">	
	<div class="btn-group btn-group-justified">
	  <div class="btn-group">
	    <button tapmode="" role="run" type="button" class="btn btn-primary">运行</button>
	  </div>	  
	  <div class="btn-group">
	    <button tapmode=""  role="edit" type="button" class="btn btn-info">编辑</button>
	  </div>
	  <div class="btn-group">
	    <button tapmode=""  role="restore" type="button" class="btn btn-warning">还原</button>
	  </div>
	</div>
</div>
</div>
    </body>
    <script src="../script/jquery-1.11.1.min.js"></script>
    <script src='../script/highlight.pack.js'></script>
    <script src='../script/demo2.js'></script>
</html>