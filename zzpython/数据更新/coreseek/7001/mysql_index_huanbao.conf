#MySQL
#请先将var/test/documents.sql导入数据库，并配置好以下的MySQL用户密码数据库

# 当前刷新时间三天内索引

source supplyPreTreeDay
{
	type                    = mysql
        sql_host                = 7006.zz91server.com
        sql_user                = ep
        sql_pass                = 4DjeuWecb3CuQWLc
        sql_db                  = ep
        sql_port                = 3306
        sql_query_pre           = SET NAMES utf8
        sql_query               = SELECT ts.id,ts.uid,ts.title,ts.title as ptitle,ts.id as pid,c1.name AS category_label1,\
                           c2.name AS category_label2,c3.name AS category_label3,c4.name AS category_label4,\
                           p1.name AS area_label1,p2.name AS area_label2,p3.name AS area_label3,\
                           p4.name AS area_label4,p5.name AS area_label5,p6.name AS area_name,\
                           p6.name as parea_name,p7.name AS province_name,p7.name as pprovince_name,\
                           ts.cid,ts.photo_cover,ts.price_num,ts.price_units,ts.price_from,ts.price_to,\
                           ts.use_to,ts.tags,ts.used_product,ts.details_query,\
                           ts.property_query,UNIX_TIMESTAMP(ts.gmt_publish) as gmt_publish,\
                           UNIX_TIMESTAMP(ts.gmt_refresh) as gmt_refresh,ts.valid_days,\
                           UNIX_TIMESTAMP(ts.gmt_expired) as gmt_expired,cp.name,\
                           cp.name as pname,cp.member_code as member_code,m1.name as member_name,m1.name as pmember_name , length(p8.id) as havepic \
                                                FROM trade_supply as ts \
                                                INNER JOIN comp_profile as cp ON ts.cid = cp.id \
						LEFT OUTER JOIN trade_category AS c1 ON LEFT(ts.category_code, 4) = c1.code \
                                                LEFT OUTER JOIN trade_category AS c2 ON LEFT(ts.category_code, 8) = c2.code \
                                                LEFT OUTER JOIN trade_category AS c3 ON LEFT(ts.category_code, 12) = c3.code \
                                                LEFT OUTER JOIN trade_category AS c4 ON LEFT(ts.category_code, 16) = c4.code \
                                                LEFT OUTER JOIN sys_area AS p1 ON LEFT(ts.area_code, 4) = p1.code \
                                                LEFT OUTER JOIN sys_area AS p2 ON LEFT(ts.area_code, 8) = p2.code \
                                                LEFT OUTER JOIN sys_area AS p3 ON LEFT(ts.area_code, 12) = p3.code \
                                                LEFT OUTER JOIN sys_area AS p4 ON LEFT(ts.area_code, 16) = p4.code \
                                                LEFT OUTER JOIN sys_area AS p5 ON LEFT(ts.area_code, 20) = p5.code \
                                                LEFT OUTER JOIN sys_area AS p6 ON ts.area_code = p6.code \
                                                LEFT OUTER JOIN sys_area AS p7 ON ts.province_code = p7.code \
                                                LEFT OUTER JOIN crm_member AS m1 ON cp.member_code = m1.code \
						LEFT OUTER JOIN photo as p8 on ts.id = p8.target_id \
                                                where ts.check_status = 1 AND ts.pause_status = 0 AND ts.del_status = 0 \
                                                AND DATEDIFF(CURDATE(),ts.gmt_refresh)<=3
	sql_attr_uint            = pid
        sql_attr_uint            = gmt_refresh
        sql_attr_uint            = uid
        sql_attr_uint            = cid
	sql_attr_uint		 = havepic
        #sql_attr_uint            = price_num
        #sql_attr_uint            = price_from
        #sql_attr_uint            = price_to
        #sql_attr_string          = title
        #sql_attr_string          = name
	sql_attr_string		  = member_code
        #sql_attr_string          = member_name
        #sql_attr_string          = area_name
        #sql_attr_string          = province_name
        #sql_attr_string          = photo_cover
        #sql_attr_string          = price_units
        #sql_attr_string          = use_to
        #sql_attr_string          = used_product
        sql_query_info_pre       = SET NAMES utf8
}
index supplyPreTreeDay
{
    source            = supplyPreTreeDay             #对应的source名称
    path              = /mnt/coreseek/var/data/supplyPreTreeDay #请修改为实际使用的绝对路径，例如：/usr/local/coreseek/var/...
    docinfo           = extern
    mlock             = 0
    morphology        = none
    min_word_len      = 1
    html_strip        = 0
    charset_dictpath  = /usr/local/mmseg3/etc/ #BSD、Linux环境下设置，/符号结尾
    charset_type      = zh_cn.utf-8
}


# 供应增量索引开始
source delta_huanbao_trade_supply
{
	type                    = mysql
	sql_host                = 7006.zz91server.com
	sql_user                = ep
	sql_pass                = 4DjeuWecb3CuQWLc
	sql_db                  = ep
	sql_port                = 3306
	sql_ranged_throttle     = 100
	sql_query_pre = SET NAMES utf8
	sql_query_pre = SET SESSION query_cache_type = OFF
	sql_query_post = REPLACE INTO counter SELECT 1,UNIX_TIMESTAMP(MAX(gmt_modified)) FROM trade_supply
	sql_query = SELECT ts.id,ts.uid,ts.title,ts.title as ptitle,ts.id as pid,c1.name AS category_label1,\
                           c2.name AS category_label2,c3.name AS category_label3,c4.name AS category_label4,\
                           p1.name AS area_label1,p2.name AS area_label2,p3.name AS area_label3,\
                           p4.name AS area_label4,p5.name AS area_label5,p6.name AS area_name,\
                           p6.name as parea_name,p7.name AS province_name,p7.name as pprovince_name,\
                           ts.cid,ts.photo_cover,ts.price_num,ts.price_units,ts.price_from,ts.price_to,\
                           ts.use_to,ts.tags,ts.used_product,ts.details_query,\
			   ts.property_query,UNIX_TIMESTAMP(ts.gmt_publish) as gmt_publish,\
                           UNIX_TIMESTAMP(ts.gmt_refresh) as gmt_refresh,ts.valid_days,\
                           UNIX_TIMESTAMP(ts.gmt_expired) as gmt_expired,cp.name,\
                           cp.name as pname,cp.member_code,m1.name as member_name,m1.name as pmember_name \
                                                FROM trade_supply as ts \
                                                INNER JOIN comp_profile as cp ON ts.cid = cp.id \
                                                LEFT OUTER JOIN trade_category AS c1 ON LEFT(ts.category_code, 4) = c1.code \
                                                LEFT OUTER JOIN trade_category AS c2 ON LEFT(ts.category_code, 8) = c2.code \
                                                LEFT OUTER JOIN trade_category AS c3 ON LEFT(ts.category_code, 12) = c3.code \
                                                LEFT OUTER JOIN trade_category AS c4 ON LEFT(ts.category_code, 16) = c4.code \
                                                LEFT OUTER JOIN sys_area AS p1 ON LEFT(ts.area_code, 4) = p1.code \
                                                LEFT OUTER JOIN sys_area AS p2 ON LEFT(ts.area_code, 8) = p2.code \
                                                LEFT OUTER JOIN sys_area AS p3 ON LEFT(ts.area_code, 12) = p3.code \
                                                LEFT OUTER JOIN sys_area AS p4 ON LEFT(ts.area_code, 16) = p4.code \
                                                LEFT OUTER JOIN sys_area AS p5 ON LEFT(ts.area_code, 20) = p5.code \
                                                LEFT OUTER JOIN sys_area AS p6 ON ts.area_code = p6.code \
						LEFT OUTER JOIN sys_area AS p7 ON ts.province_code = p7.code \
                                                LEFT OUTER JOIN crm_member AS m1 ON cp.member_code = m1.code \
                                                where ts.check_status = 1 AND ts.pause_status = 0 AND ts.del_status = 0 \
						AND DATEDIFF(CURDATE(),ts.gmt_refresh)>3 \
						AND UNIX_TIMESTAMP(ts.gmt_modified) > (SELECT max_doc_id from counter WHERE id = 1)

        sql_attr_uint            = pid
	sql_attr_uint            = gmt_refresh  #从SQL读取到的值必须为整数，作为时间属性
        sql_attr_uint            = uid
        sql_attr_uint            = cid
        sql_attr_uint            = price_num
        sql_attr_uint            = price_from
        sql_attr_uint            = price_to
        sql_attr_string          = title
        sql_attr_string          = name
        sql_attr_string          = member_name
        sql_attr_string          = area_name
        sql_attr_string          = province_name
        sql_attr_string          = photo_cover
        sql_attr_string          = price_units
        sql_attr_string          = use_to
        sql_attr_string          = used_product
        sql_query_info_pre       = SET NAMES utf8 

}
# 供应增量索引结束

index delta_huanbao_trade_supply
{
	source 		= delta_huanbao_trade_supply
	path 		= /mnt/coreseek/var/data/delta_huanbao_trade_supply
	docinfo		= extern
	mlock		= 0
	morphology	= none
	min_word_len 	= 1
	html_strip 	= 0
	charset_dictpath= /usr/local/mmseg3/etc/
	charset_type 	= zh_cn.utf-8
}

#源定义 刷新时间三天之外的所有数据
source huanbao_trade_supply
{
	type                    = mysql
	sql_host                = 7006.zz91server.com
	sql_user                = ep
	sql_pass                = 4DjeuWecb3CuQWLc
	sql_db                  = ep
	sql_port                = 3306
	sql_query_pre           = SET NAMES utf8
	sql_query               = SELECT ts.id,ts.uid,ts.title,ts.title as ptitle,ts.id as pid,c1.name AS category_label1,\
                           c2.name AS category_label2,c3.name AS category_label3,c4.name AS category_label4,\
                           p1.name AS area_label1,p2.name AS area_label2,p3.name AS area_label3,\
                           p4.name AS area_label4,p5.name AS area_label5,p6.name AS area_name,\
                           p6.name as parea_name,p7.name AS province_name,p7.name as pprovince_name,\
                           ts.cid,ts.photo_cover,ts.price_num,ts.price_units,ts.price_from,ts.price_to,\
                           ts.use_to,ts.tags,ts.used_product,ts.details_query,\
                           ts.property_query,UNIX_TIMESTAMP(ts.gmt_publish) as gmt_publish,\
                           UNIX_TIMESTAMP(ts.gmt_refresh) as gmt_refresh,ts.valid_days,\
                           UNIX_TIMESTAMP(ts.gmt_expired) as gmt_expired,cp.name,\
                           cp.name as pname,cp.member_code,m1.name as member_name,m1.name as pmember_name , length(p8.id) as havepic\
                                                FROM trade_supply as ts \
                                                INNER JOIN comp_profile as cp ON ts.cid = cp.id \
                                                LEFT OUTER JOIN trade_category AS c1 ON LEFT(ts.category_code, 4) = c1.code \
                                                LEFT OUTER JOIN trade_category AS c2 ON LEFT(ts.category_code, 8) = c2.code \
                                                LEFT OUTER JOIN trade_category AS c3 ON LEFT(ts.category_code, 12) = c3.code \
                                                LEFT OUTER JOIN trade_category AS c4 ON LEFT(ts.category_code, 16) = c4.code \
                                                LEFT OUTER JOIN sys_area AS p1 ON LEFT(ts.area_code, 4) = p1.code \
                                                LEFT OUTER JOIN sys_area AS p2 ON LEFT(ts.area_code, 8) = p2.code \
                                                LEFT OUTER JOIN sys_area AS p3 ON LEFT(ts.area_code, 12) = p3.code \
                                                LEFT OUTER JOIN sys_area AS p4 ON LEFT(ts.area_code, 16) = p4.code \
                                                LEFT OUTER JOIN sys_area AS p5 ON LEFT(ts.area_code, 20) = p5.code \
                                                LEFT OUTER JOIN sys_area AS p6 ON ts.area_code = p6.code \
                                                LEFT OUTER JOIN sys_area AS p7 ON ts.province_code = p7.code \
                                                LEFT OUTER JOIN crm_member AS m1 ON cp.member_code = m1.code \
						LEFT OUTER JOIN photo as p8 on ts.id = p8.target_id \
                                                where ts.check_status = 1 AND ts.pause_status = 0 AND ts.del_status = 0 \
						AND DATEDIFF(CURDATE(),ts.gmt_refresh)>3

                                                              #sql_query第一列id需为整数
                                                              #title、content作为字符串/文本字段，被全文索引
	sql_attr_uint            = pid
	sql_attr_uint 	         = gmt_refresh  #从SQL读取到的值必须为整数，作为时间属性
	sql_attr_uint            = uid
	sql_attr_uint            = cid
	sql_attr_uint            = price_num
	sql_attr_uint            = price_from
	sql_attr_uint            = price_to
	sql_attr_uint		 = havepic
	sql_attr_string          = title
	sql_attr_string          = name
	sql_attr_string          = member_name
	sql_attr_string          = area_name
	sql_attr_string          = province_name
	sql_attr_string          = photo_cover
	sql_attr_string          = price_units
	sql_attr_string          = use_to
	sql_attr_string          = used_product
	sql_query_info_pre       = SET NAMES utf8                                        #命令行查询时，设置正确的字符集
}



#index定义

index huanbao_trade_supply
{
    source            = huanbao_trade_supply             #对应的source名称
    path              = /mnt/coreseek/var/data/huanbao_trade_supply #请修改为实际使用的绝对路径，例如：/usr/local/coreseek/var/...
    docinfo           = extern
    mlock             = 0
    morphology        = none
    min_word_len      = 1
    html_strip        = 0

    #中文分词配置，详情请查看：http://www.coreseek.cn/products-install/coreseek_mmseg/
    charset_dictpath  = /usr/local/mmseg3/etc/ #BSD、Linux环境下设置，/符号结尾
    #charset_dictpath = /mnt/coreseek/etc/                             #Windows环境下设置，/符号结尾，最好给出绝对路径，例如：C:/usr/local/coreseek/etc/...
    charset_type      = zh_cn.utf-8
}

source huanbao_trade_buy
{
        type                    = mysql
        sql_host                = 7006.zz91server.com
        sql_user                = ep
        sql_pass                = 4DjeuWecb3CuQWLc
        sql_db                  = ep
        sql_port                = 3306
        sql_query_pre           = SET NAMES utf8
        sql_query               = SELECT ts.id,ts.title as ptitle,ts.id as pid,ts.details_query,ts.cid as cid,\
                           p1.name AS area_label1,p2.name AS area_label2,p3.name AS area_label3,\
                           p4.name AS area_label4,p5.name AS area_label5,p6.name AS area_name,\
                           p6.name as parea_name,p7.name AS province_name,p7.name as pprovince_name,\
                           UNIX_TIMESTAMP(ts.gmt_publish) as gmt_publish,\
                           UNIX_TIMESTAMP(ts.gmt_refresh) as gmt_refresh,ts.valid_days,\
                           UNIX_TIMESTAMP(ts.gmt_expired) as gmt_expired,cp.name,\
                           cp.name as pname,cp.member_code,m1.name as pmember_name \
                                                FROM trade_buy as ts \
                                                INNER JOIN comp_profile as cp ON ts.cid = cp.id \
                                                LEFT OUTER JOIN sys_area AS p1 ON LEFT(ts.area_code, 4) = p1.code \
                                                LEFT OUTER JOIN sys_area AS p2 ON LEFT(ts.area_code, 8) = p2.code \
                                                LEFT OUTER JOIN sys_area AS p3 ON LEFT(ts.area_code, 12) = p3.code \
                                                LEFT OUTER JOIN sys_area AS p4 ON LEFT(ts.area_code, 16) = p4.code \
                                                LEFT OUTER JOIN sys_area AS p5 ON LEFT(ts.area_code, 20) = p5.code \
                                                LEFT OUTER JOIN sys_area AS p6 ON ts.area_code = p6.code \
                                                LEFT OUTER JOIN sys_area AS p7 ON ts.province_code = p7.code \
                                                LEFT OUTER JOIN crm_member AS m1 ON cp.member_code = m1.code \
                                                where ts.check_status = 1 AND ts.pause_status = 0 AND ts.del_status = 0 \
                                                AND DATEDIFF(CURDATE(),ts.gmt_refresh)>3
        sql_attr_uint           = pid
	sql_attr_uint           = cid
        sql_attr_uint           = gmt_refresh
        sql_attr_string         = member_code
        sql_query_info_pre      = SET NAMES utf8

}

index huanbao_trade_buy
{
    source            = huanbao_trade_buy
    path              = /mnt/coreseek/var/data/huanbao_trade_buy
    docinfo           = extern
    mlock             = 0
    morphology        = none
    min_word_len      = 1
    html_strip        = 0
    charset_dictpath  = /usr/local/mmseg3/etc/ 
    charset_type      = zh_cn.utf-8
}


source delta_huanbao_trade_buy:huanbao_trade_buy
{
	sql_ranged_throttle = 100
        sql_query_pre 	= SET NAMES utf8
        sql_query_pre	= SET SESSION query_cache_type = OFF
        sql_query_post	= REPLACE INTO counter SELECT 3,UNIX_TIMESTAMP(MAX(gmt_modified)) FROM trade_buy
        sql_query      	= SELECT ts.id,ts.title as ptitle,ts.id as pid,ts.details_query,ts.cid as cid,\
                           p1.name AS area_label1,p2.name AS area_label2,p3.name AS area_label3,\
                           p4.name AS area_label4,p5.name AS area_label5,p6.name AS area_name,\
                           p6.name as parea_name,p7.name AS province_name,p7.name as pprovince_name,\
                           UNIX_TIMESTAMP(ts.gmt_publish) as gmt_publish,\
                           UNIX_TIMESTAMP(ts.gmt_refresh) as gmt_refresh,ts.valid_days,\
                           UNIX_TIMESTAMP(ts.gmt_expired) as gmt_expired,cp.name,\
                           cp.name as pname,cp.member_code,m1.name as pmember_name \
                                                FROM trade_buy as ts \
                                                INNER JOIN comp_profile as cp ON ts.cid = cp.id \
                                                LEFT OUTER JOIN sys_area AS p1 ON LEFT(ts.area_code, 4) = p1.code \
                                                LEFT OUTER JOIN sys_area AS p2 ON LEFT(ts.area_code, 8) = p2.code \
                                                LEFT OUTER JOIN sys_area AS p3 ON LEFT(ts.area_code, 12) = p3.code \
                                                LEFT OUTER JOIN sys_area AS p4 ON LEFT(ts.area_code, 16) = p4.code \
                                                LEFT OUTER JOIN sys_area AS p5 ON LEFT(ts.area_code, 20) = p5.code \
                                                LEFT OUTER JOIN sys_area AS p6 ON ts.area_code = p6.code \
                                                LEFT OUTER JOIN sys_area AS p7 ON ts.province_code = p7.code \
                                                LEFT OUTER JOIN crm_member AS m1 ON cp.member_code = m1.code \
                                                where ts.check_status = 1 AND ts.pause_status = 0 AND ts.del_status = 0 \
                                                AND DATEDIFF(CURDATE(),ts.gmt_refresh)>3 \
						AND UNIX_TIMESTAMP(ts.gmt_modified) > (SELECT max_doc_id from counter WHERE id = 3)
        sql_attr_uint           = pid
	sql_attr_uint 		= cid
        sql_attr_uint           = gmt_refresh
        sql_attr_string         = member_code
        sql_query_info_pre      = SET NAMES utf8

}
index delta_huanbao_trade_buy:huanbao_trade_buy
{
        source          = delta_huanbao_trade_buy
        path            = /mnt/coreseek/var/data/huanbao_trade_buy_p
        docinfo         = extern
        mlock           = 0
        morphology      = none
        min_word_len    = 1
        html_strip      = 0
        charset_dictpath= /usr/local/mmseg3/etc/
        charset_type    = zh_cn.utf-8
}



source buyPreTreeDay
{
	type                    = mysql
        sql_host                = 7006.zz91server.com
        sql_user                = ep
        sql_pass                = 4DjeuWecb3CuQWLc
        sql_db                  = ep
        sql_port                = 3306
        sql_query_pre           = SET NAMES utf8
        sql_query               = SELECT ts.id,ts.title as ptitle,ts.id as pid,ts.details_query,ts.cid as cid,\
                           p1.name AS area_label1,p2.name AS area_label2,p3.name AS area_label3,\
                           p4.name AS area_label4,p5.name AS area_label5,p6.name AS area_name,\
                           p6.name as parea_name,p7.name AS province_name,p7.name as pprovince_name,\
                           UNIX_TIMESTAMP(ts.gmt_publish) as gmt_publish,\
                           UNIX_TIMESTAMP(ts.gmt_refresh) as gmt_refresh,ts.valid_days,\
                           UNIX_TIMESTAMP(ts.gmt_expired) as gmt_expired,cp.name,\
                           cp.name as pname,cp.member_code,m1.name as pmember_name \
                                                FROM trade_buy as ts \
                                                INNER JOIN comp_profile as cp ON ts.cid = cp.id \
                                                LEFT OUTER JOIN sys_area AS p1 ON LEFT(ts.area_code, 4) = p1.code \
                                                LEFT OUTER JOIN sys_area AS p2 ON LEFT(ts.area_code, 8) = p2.code \
                                                LEFT OUTER JOIN sys_area AS p3 ON LEFT(ts.area_code, 12) = p3.code \
                                                LEFT OUTER JOIN sys_area AS p4 ON LEFT(ts.area_code, 16) = p4.code \
                                                LEFT OUTER JOIN sys_area AS p5 ON LEFT(ts.area_code, 20) = p5.code \
                                                LEFT OUTER JOIN sys_area AS p6 ON ts.area_code = p6.code \
                                                LEFT OUTER JOIN sys_area AS p7 ON ts.province_code = p7.code \
                                                LEFT OUTER JOIN crm_member AS m1 ON cp.member_code = m1.code \
                                                where ts.check_status = 1 AND ts.pause_status = 0 AND ts.del_status = 0 \
                                                AND DATEDIFF(CURDATE(),ts.gmt_refresh)<=3
        sql_attr_uint           = pid
	sql_attr_uint           = cid
        sql_attr_uint           = gmt_refresh
	sql_attr_string         = member_code
        sql_query_info_pre      = SET NAMES utf8

}






index buyPreTreeDay
{
    source            = buyPreTreeDay             
    path              = /mnt/coreseek/var/data/buyPreTreeDay 
    docinfo           = extern
    mlock             = 0
    morphology        = none
    min_word_len      = 1
    html_strip        = 0
    charset_dictpath  = /usr/local/mmseg3/etc/ 
    charset_type      = zh_cn.utf-8
}


source huanbao_company
{
    type                    = mysql
    sql_host                = 7006.zz91server.com
    sql_user                = ep
    sql_pass                = 4DjeuWecb3CuQWLc
    sql_db                  = ep
    sql_port                = 3306
    sql_query_pre           = SET NAMES utf8
	sql_query               = select ts.id,\
								ts.id as pid, \
								ts.name,\
								ts.name as pname,\
								ts.details_query as details,\
								ts.details_query as pdetails,\
								ts.industry_code,\
								ts.business_code,\
								ts.main_buy,\
								ts.main_product_buy,\
								ts.main_supply,\
								ts.main_product_supply,\
								ts.address,\
								ts.address as paddress,\
								ts.province_code,\
								ts.area_code, \
								ts.member_code, \
								UNIX_TIMESTAMP(ts.gmt_created) as gmt_created, \
								ts.del_status, \
								p1.name AS area_label1,\
								p2.name AS area_label2,\
								p3.name AS area_label3,\
								p4.name AS area_label4,\
								p5.name AS area_label5,\
								p6.name AS area_name,\
								p6.name as parea_name,\
								p7.name AS province_name,\
								p7.name as pprovince_name, \
								pa.name as indeustry_name \
								from comp_profile as ts \
								LEFT OUTER JOIN sys_area AS p1 ON LEFT(ts.area_code, 4) = p1.code \
								LEFT OUTER JOIN sys_area AS p2 ON LEFT(ts.area_code, 8) = p2.code \
								LEFT OUTER JOIN sys_area AS p3 ON LEFT(ts.area_code, 12) = p3.code \
								LEFT OUTER JOIN sys_area AS p4 ON LEFT(ts.area_code, 16) = p4.code \
								LEFT OUTER JOIN sys_area AS p5 ON LEFT(ts.area_code, 20) = p5.code \
								LEFT OUTER JOIN sys_area AS p6 ON ts.area_code = p6.code \
								LEFT OUTER JOIN sys_area AS p7 ON ts.province_code = p7.code \
								LEFT OUTER JOIN (select code,name from trade_category where code like '1000____') AS pa ON ts.industry_code = pa.code
    sql_attr_uint            = pid
	sql_attr_string          = details
	sql_attr_string          = name
	sql_attr_string          = address
	sql_attr_string          = main_buy
	sql_attr_string          = main_product_buy
	sql_attr_string          = main_supply
	sql_attr_string          = main_product_supply
	sql_attr_string          = area_name
	sql_attr_string          = province_name
	sql_attr_string		 = member_code
	sql_attr_uint		 = gmt_created
	sql_attr_uint		 = del_status
	sql_attr_string          = ForArticles indeustry_name
	sql_query_info_pre       = SET NAMES utf8                                        #命令行查询时，设置正确的字符集
}

#index定义
index huanbao_company
{
    source            = huanbao_company             #对应的source名称
    path              = /mnt/coreseek/var/data/huanbao_company #请修改为实际使用的绝对路径，例如：/usr/local/coreseek/var/...
    docinfo           = extern
    mlock             = 0
    morphology        = none
    min_word_len      = 1
    html_strip        = 0

    #中文分词配置，详情请查看：http://www.coreseek.cn/products-install/coreseek_mmseg/
    charset_dictpath  = /usr/local/mmseg3/etc/ #BSD、Linux环境下设置，/符号结尾
    #charset_dictpath = /mnt/coreseek/etc/                             #Windows环境下设置，/符号结尾，最好给出绝对路径，例如：C:/usr/local/coreseek/etc/...
    charset_type      = zh_cn.utf-8
}


source compNewsForArticles
{
        type                  = mysql
        sql_host              = 7006.zz91server.com
        sql_user              = ep
        sql_pass              = 4DjeuWecb3CuQWLc
        sql_db                = ep
        sql_port              = 3306
        sql_query_pre         = SET NAMES utf8                
        sql_query             = SELECT id,id as pid,title,tags,UNIX_TIMESTAMP(gmt_created) as gmt_created  from comp_news cn \
                                where \
                                check_status=1 \
                                AND pause_status=1 \
                                AND category_code=1001 \
                                AND delete_status=1

       sql_attr_uint             = pid
       sql_attr_uint             = gmt_created
       sql_query_info_pre        = SET NAMES utf8
}
#index定义
index compNewsForArticles
{
   source             = compNewsForArticles 
   path               = /mnt/coreseek/var/data/comp_news_articles
   docinfo            = extern
    mlock             = 0
    morphology        = none
    min_word_len      = 1
    html_strip        = 0
    charset_dictpath   = /usr/local/mmseg3/etc/
    charset_type      = zh_cn.utf-8

}



source mblogInfoForName
{
        type                  = mysql
        sql_host              = 7006.zz91server.com
        sql_user              = ep
        sql_pass              = 4DjeuWecb3CuQWLc
        sql_db                = ep
        sql_port              = 3306
        sql_query_pre         = SET NAMES utf8
        sql_query             = SELECT id,id as pid,name,UNIX_TIMESTAMP(gmt_created) as gmt_created  from mblog_info mi \
                                where \
                                is_delete=0

       sql_attr_uint             = pid
       sql_attr_uint             = gmt_created
       sql_query_info_pre        = SET NAMES utf8
}


#index定义
index mblogInfoForName
{
    source             = mblogInfoForName
    path               = /mnt/coreseek/var/data/mblogInfoForName
    docinfo            = extern
    mlock              = 0
    morphology         = none
    min_word_len       = 1
    html_strip         = 0
    charset_dictpath   = /usr/local/mmseg3/etc/
    charset_type       = zh_cn.utf-8

}


source mblogForContent
{
        type                  = mysql
        sql_host              = 7006.zz91server.com
        sql_user              = ep
        sql_pass              = 4DjeuWecb3CuQWLc
        sql_db                = ep
        sql_port              = 3306
        sql_query_pre         = SET NAMES utf8
        sql_query             = SELECT id,id as pid,content,UNIX_TIMESTAMP(gmt_created) as gmt_created  from mblog m \
                                where \
                                is_delete=0

       sql_attr_uint             = pid
       sql_attr_uint             = gmt_created
       sql_query_info_pre        = SET NAMES utf8
}


#index定义
index mblogForContent
{
    source             = mblogForContent
    path               = /mnt/coreseek/var/data/mblogForContent
    docinfo            = extern
    mlock              = 0
    morphology         = none
    min_word_len       = 1
    html_strip         = 0
    charset_dictpath   = /usr/local/mmseg3/etc/
    charset_type       = zh_cn.utf-8

}


source followInfoForName
{
        type                  = mysql
        sql_host              = 7006.zz91server.com
        sql_user              = ep
        sql_pass              = 4DjeuWecb3CuQWLc
        sql_db                = ep
        sql_port              = 3306
        sql_query_pre         = SET NAMES utf8    
        sql_query             = SELECT mf.id,mf.id as pid,mf.info_id as info_id,mi.name,UNIX_TIMESTAMP(mf.gmt_created) as gmt_created from \
				 mblog_follow mf \
 				inner join mblog_info mi on mi.id=mf.target_id                                 
				
                                
       sql_attr_uint             = pid
       sql_attr_uint             = info_id
       sql_attr_uint             = gmt_created
       sql_query_info_pre        = SET NAMES utf8
}


#index定义
index followInfoForName
{
    source             = followInfoForName
    path               = /mnt/coreseek/var/data/followInfoForName
    docinfo            = extern
    mlock              = 0
    morphology         = none
    min_word_len       = 1
    html_strip         = 0
    charset_dictpath   = /usr/local/mmseg3/etc/
    charset_type       = zh_cn.utf-8
}

source huanbao_new_company
{
    type                = mysql
    sql_host            = 7006.zz91server.com
    sql_user            = ep
    sql_pass            = 4DjeuWecb3CuQWLc
    sql_db              = ep
    sql_port            = 3306
    sql_query_pre       = SET NAMES utf8
    sql_query           = SELECT cp.id,cp.name,cp.name as pname,length(cp.name) as name_len,cp.details_query,cp.main_supply,length(cp.member_code_block) as member_code_block,cp.business_code,cp.industry_code,LEFT(cp.area_code,16) as area_code,cp.province_code,UNIX_TIMESTAMP(cp.gmt_created) as gmt_created,cp.del_status,length(ca.account) as account_len from comp_profile as cp \
               left outer join comp_account as ca on ca.cid=cp.id  
    sql_attr_uint         = member_code_block
    sql_attr_uint         = main_supply
    sql_attr_string       = pname
    sql_attr_uint         = name_len
    sql_attr_uint         = business_code
    sql_attr_uint         = industry_code
    sql_attr_string       = area_code
    sql_attr_timestamp    = gmt_created
    sql_attr_uint         = del_status
    sql_attr_uint         = account_len
    sql_query_info_pre    = SET NAMES utf8
}
index huanbao_new_company
{
    source              = huanbao_new_company
    path                = /mnt/coreseek/var/data/huanbao_new_company
    docinfo             = extern
    mlock               = 0
    morphology          = none
    min_word_len        = 1
    html_strip          = 0
    charset_dictpath   = /usr/local/mmseg3/etc/
    charset_type       = zh_cn.utf-8
}

source huanbao_new_exhibit
{
    type                = mysql
    sql_host            = 7006.zz91server.com
    sql_user            = ep
    sql_pass            = 4DjeuWecb3CuQWLc
    sql_db              = ep
    sql_port            = 3306
    sql_query_pre       = SET NAMES utf8
    sql_query           = select e.id,e.name,e.province_code,e.area_code,UNIX_TIMESTAMP(DATE_FORMAT(e.gmt_start,'%Y-%m-%d')) as start_date,UNIX_TIMESTAMP(DATE_FORMAT(e.gmt_end,'%Y-%m-%d')) as end_date,e.plate_category_code,e.industry_code,e.organizers,e.pause_status,UNIX_TIMESTAMP(e.gmt_publish) as gmt_publish from exhibit as e
    sql_attr_uint         = plate_category_code
    sql_attr_uint         = industry_code
    sql_attr_uint         = pause_status
    sql_attr_timestamp    = gmt_publish
    sql_attr_uint         = start_date
    sql_attr_uint         = end_date
    sql_query_info_pre    = SET NAMES utf8
}
index huanbao_new_exhibit
{
    source              = huanbao_new_exhibit
    path                = /mnt/coreseek/var/data/huanbao_new_exhibit
    docinfo             = extern
    mlock               = 0
    morphology          = none
    min_word_len        = 1
    html_strip          = 0
    charset_dictpath   = /usr/local/mmseg3/etc/
    charset_type       = zh_cn.utf-8
}
#全局index定义
indexer
{
    mem_limit           = 128M
}

#searchd服务定义
searchd
{
    listen              = 9312
    read_timeout        = 5
    max_children        = 30
    max_matches         = 1000000
    seamless_rotate     = 1
    preopen_indexes     = 1
    unlink_old          = 1
    pid_file            = /mnt/coreseek/var/log/searchd_huanbao_trade_supply.pid  #请修改为实际使用的绝对路径，例如：/usr/local/coreseek/var/...
    log                 = /mnt/coreseek/var/log/searchd_huanbao_trade_supply.log        #请修改为实际使用的绝对路径，例如：/usr/local/coreseek/var/...
    query_log           = /mnt/coreseek/var/log/query_huanbao_trade_supply.log #请修改为实际使用的绝对路径，例如：/usr/local/coreseek/var/...
    binlog_path         =                                #关闭binlog日志
}
